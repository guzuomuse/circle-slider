/*
 Miriam Zusin | The MIT License (MIT) http://opensource.org/licenses/MIT
*/
(function(f){var g=function(a){a.$root.on("mousedown",function(b){b.preventDefault();a.handle1.isMouseInside(b.pageX,b.pageY,a.angle)&&(a.mouseDown=!0,a.activeHandle=1);a.settings.isRange&&a.handle2.isMouseInside(b.pageX,b.pageY,a.angle2)&&(a.mouseDown=!0,a.activeHandle=2)});f(document).on("mouseup",function(b){a.mouseDown=!1});f(document).on("mousemove",function(b){var e;a.mouseDown&&(e={oldAngle1:a.angle,oldAngle2:a.angle2},b=jQuery.fn.circleSlider.vectors.getAngleByMousePosition(a.canvasPos,a.shapeCenter,
b.pageX,b.pageY),d(a,e,b))});a.$root.on("mousewheel DOMMouseScroll",function(b){var e,f;b.preventDefault();f={oldAngle1:a.angle,oldAngle2:a.angle2};e=b.originalEvent.wheelDelta;void 0===e&&(e=b.originalEvent.detail||0);b=a.angle;a.activeHandle||(a.activeHandle=1);2===a.activeHandle&&(b=a.angle2);b=0<=e?b+a.settings.mousewheelStep:b-a.settings.mousewheelStep;d(a,f,jQuery.fn.circleSlider.vectors.toPositiveAngle(b))});a.$root.on("image-loaded",function(b,e){e&&(a.settings=e);d(a,{oldAngle1:a.angle,oldAngle2:a.angle2},
void 0)})},d=function(a,b,d){a.context.clearRect(0,0,a.canvas.width,a.canvas.height);1===a.activeHandle?a.backgroundShape.draw(b.oldAngle1,d):a.backgroundShape.draw(b.oldAngle2,d);a.settings.angle2Defined&&a.pathShape.draw(b.oldAngle1,b.oldAngle2);a.settings.hasArrow&&(a.arrow.draw(a.angle,a.handle1.getCenter(a.angle)),a.settings.isRange&&a.arrow.draw(a.angle2,a.handle2.getCenter(a.angle2)));void 0!==d&&jQuery.fn.circleSlider.vectors.ifAngleInRange(d,a.settings.start,a.settings.end)&&(1===a.activeHandle&&
(a.angle=d),a.settings.isRange&&2===a.activeHandle&&(a.angle2=d));jQuery.fn.circleSlider.vectors.ifAngleInRange(a.angle,a.settings.start,a.settings.end)&&(a.handle1.draw(a.angle,1,b.oldAngle1),a.$degrees.text(Math.round(a.angle)),a.settings.isRange&&jQuery.fn.circleSlider.vectors.ifAngleInRange(a.angle2,a.settings.start,a.settings.end)&&(a.handle2.draw(a.angle2,2,b.oldAngle2),a.$degrees2.text(Math.round(a.angle2))));f.isFunction(a.settings.callback)&&a.settings.callback(a.angle,a.angle2)},e=function(a,
b){this.$root=b;this.$degrees=b.find('[data-type="degrees"]');this.$degrees2=b.find('[data-type="degrees2"]');this.settings=jQuery.fn.circleSlider.settings.get(a,b);this.mouseDown=!1;this.activeHandle=0;var e;e=2*(this.settings.radius+this.settings.padding);this.canvas=f('<canvas width="'+e+'" height="'+(this.settings.isEllipse?2*(this.settings.radius2+this.settings.padding):e)+'" />').get(0);this.$root.append(this.canvas).css({position:"relative"});this.canvasPos=this.$root.offset();this.context=
this.canvas.getContext("2d");this.backgroundShape=new jQuery.fn.circleSlider.shapes.backgroundShape(this.settings,this.canvas);this.pathShape=new jQuery.fn.circleSlider.shapes.pathShape(this.settings,this.canvas);this.handle1=new jQuery.fn.circleSlider.shapes.handleShape(this.settings,this.canvas,this.canvasPos);this.handle2=new jQuery.fn.circleSlider.shapes.handleShape(this.settings,this.canvas,this.canvasPos);this.arrow=new jQuery.fn.circleSlider.shapes.arrowShape(this.settings,this.canvas);this.angle=
this.settings.angle;this.angle2=this.settings.angle2;this.startingAngle=this.angle;this.endingAngle=this.angle2;this.shapeCenter={x:this.settings.radius+this.settings.padding,y:this.settings.radius2+this.settings.padding};d(this,{oldAngle1:this.angle,oldAngle2:this.angle2},void 0);g(this)};jQuery.fn.circleSlider=function(a){return this.each(function(){if(document.createElement("canvas").getContext){var b=jQuery(this),d=new e(a,b);b.data("circleSlider",d)}})};jQuery.fn.circleSlider.vectors=jQuery.fn.circleSlider.vectors||
{};jQuery.fn.circleSlider.settings=jQuery.fn.circleSlider.settings||{};jQuery.fn.circleSlider.shapes=jQuery.fn.circleSlider.shapes||{};jQuery.fn.circleSlider.effects=jQuery.fn.circleSlider.effects||{};f(document).ready(function(){f('[data-type="circle-slider"]').each(function(){f(this).circleSlider()})})})(jQuery);(function(f){var g=function(a,b,c){c.shapeColor=b.attr("data-bgcolor")||"#fff";c.shapeColor2=b.attr("data-bgcolor2")||"#fff";c.isShapeGradient=void 0!==b.attr("data-bgcolor2");c.shapeGradientType=b.attr("data-bggradient")||"h";b.attr("data-bg-image")&&(c.shapeBGImage=new Image,c.shapeBGImage.onload=function(){c.shapeBGImage.loaded=!0;b.trigger("image-loaded",[c])},c.shapeBGImage.src=b.attr("data-bg-image"));b.attr("data-image")&&(c.shapeImage=new Image,c.shapeImage.onload=function(){c.shapeImage.loaded=
!0;b.trigger("image-loaded",[c])},c.shapeImage.src=b.attr("data-image"))},d=function(a,b,c){c.strokeColor=b.attr("data-path-bgcolor")||"#000";c.strokeColor2=b.attr("data-path-bgcolor2")||"#000";c.isPathGradient=void 0!==b.attr("data-path-bgcolor2");c.strokeWidth=Number(b.attr("data-path-width"))||0;c.strokeGradientType=b.attr("data-path-gradient")||"h";0>c.strokeWidth&&(c.strokeWidth=0);c.strokeColorActive=b.attr("data-path-bgcolor-active")||"#888";c.strokeColorActive2=b.attr("data-path-bgcolor-active2")||
"#888";c.isStrokeColorActiveGradient=void 0!==b.attr("data-path-bgcolor-active2");c.strokeColorActiveGradientType=b.attr("data-path-bgcolor-active-gradient")||"h";b.attr("data-path-bg-image")&&(c.strokeImage=new Image,c.strokeImage.onload=function(){c.strokeImage.loaded=!0;b.trigger("image-loaded",[c])},c.strokeImage.src=b.attr("data-path-bg-image"));b.attr("data-path-bg-image-active")&&(c.strokeImageActive=new Image,c.strokeImageActive.onload=function(){c.strokeImageActive.loaded=!0;b.trigger("image-loaded",
[c])},c.strokeImageActive.src=b.attr("data-path-bg-image-active"));b.attr("data-path-image")&&(c.pathImage=new Image,c.pathImage.onload=function(){c.pathImage.loaded=!0;b.trigger("image-loaded",[c])},c.pathImage.src=b.attr("data-path-image"))},e=function(a,b,c){c.handleColor=b.attr("data-handle-color")||"#ff0000";c.handleColor2=b.attr("data-handle-color2")||"#ff0000";c.handle2Color=b.attr("data-handle2-color")||"#ff0000";c.handle2Color2=b.attr("data-handle2-color2")||"#ff0000";c.isHandleGradient=
void 0!==b.attr("data-handle-color2");c.isHandle2Gradient=void 0!==b.attr("data-handle2-color2");c.handleGradientType=b.attr("data-handle-gradient")||"h";c.handleGradientType2=b.attr("data-handle2-gradient")||"h";c.angle=f.fn.circleSlider.vectors.toPositiveAngle(Number(b.attr("data-angle"))||0);c.angle2=f.fn.circleSlider.vectors.toPositiveAngle(Number(b.attr("data-angle2"))||0);c.angle2Defined=void 0!==b.attr("data-angle2");c.isRange="true"===b.attr("data-range");c.start=f.fn.circleSlider.vectors.toPositiveAngle(Number(b.attr("data-start"))||
0);c.end=f.fn.circleSlider.vectors.toPositiveAngle(Number(b.attr("data-end"))||360);b.attr("data-handle-bg-image")&&(c.handleImage=new Image,c.handleImage.onload=function(){c.handleImage.loaded=!0;b.trigger("image-loaded",[c])},c.handleImage.src=b.attr("data-handle-bg-image"));b.attr("data-handle2-bg-image")&&(c.handle2Image=new Image,c.handle2Image.onload=function(){c.handle2Image.loaded=!0;b.trigger("image-loaded",[c])},c.handle2Image.src=b.attr("data-handle2-bg-image"))},a=function(b,a,c){c.isBgShadow=
"true"===a.attr("data-bgshadow");c.isHandleShadow="true"===a.attr("data-handle-shadow");c.isBgShadow&&(c.bgshadowColor=a.attr("data-bgshadow-color")||"#000",c.bgshadowBlur=Number(a.attr("data-bgshadow-blur"))||10,c.bgshadowOffsetX=Number(a.attr("data-bgshadow-x"))||0,c.bgshadowOffsetY=Number(a.attr("data-bgshadow-y"))||0);c.isHandleShadow&&(c.handleShadowColor=a.attr("data-handle-shadow-color")||"#000",c.handleShadowBlur=Number(a.attr("data-handle-shadow-blur"))||10,c.handleShadowOffsetX=Number(a.attr("data-handle-shadow-x"))||
0,c.handleShadowOffsetY=Number(a.attr("data-handle-shadow-y"))||0)},b=function(a,b,c){c.radius=Number(b.attr("data-radius"))||100;c.radius2=c.radius;c.isEllipse=!1;c.radius2Scale=1;void 0!==b.attr("data-radius2")&&(c.isEllipse=!0,c.radius2=Number(b.attr("data-radius2"))||0)},h=function(a,b,c){a=b.attr("data-effects");c.effects=[];if(a){a=a.split(" ");for(var d=0;d<a.length;d++)(b=$.trim(a[d]))&&c.effects.push(b)}},l=function(a,b,c){c.hasArrow="true"===b.attr("data-arrow");c.arrowWidth=Number(b.attr("data-arrow-width"))||
5;c.arrowColor=b.attr("data-arrow-color")||"#000";b.attr("data-arrow-bg-image")&&(c.arrowBGImage=new Image,c.arrowBGImage.onload=function(){c.arrowBGImage.loaded=!0;b.trigger("image-loaded",[c])},c.arrowBGImage.src=b.attr("data-arrow-bg-image"));b.attr("data-arrow-image")&&(c.arrowImage=new Image,c.arrowImage.onload=function(){c.arrowImage.loaded=!0;b.trigger("image-loaded",[c])},c.arrowImage.src=b.attr("data-arrow-image"))};f.fn.circleSlider.settings.get=function(m,k){var c={};c.padding=Number(k.attr("data-padding"))||
0;c.mousewheelStep=Number(k.attr("data-mousewheel-step"))||2;c.callback=function(){};b(m,k,c);g(m,k,c);d(m,k,c);e(m,k,c);a(m,k,c);h(m,k,c);l(m,k,c);c.handleRadius=Number(k.attr("data-handle-radius"))||c.strokeWidth/2;c.isEllipse&&(c.radius2Scale=c.radius2/c.radius);return f.extend(!0,c,m)}})(jQuery);(function(f){var g=f.fn.circleSlider.vectors;g.normalize=function(d){var e=g.getVectorLength(d);return 0===e?{x:0,y:0}:{x:d.x/e,y:d.y/e}};g.mulScalar=function(d,e){return{x:d.x*e,y:d.y*e}};g.getVectorLength=function(d){return Math.sqrt(d.x*d.x+d.y*d.y)};g.sub=function(d,e){return{x:d.x-e.x,y:d.y-e.y}};g.isPointInsideCircle=function(d,e,a,b,f){return(a-d)*(a-d)+(b-e)*(b-e)<=f*f};g.getRadians=function(d){return d*Math.PI/180};g.getDegrees=function(d){return 180*d/Math.PI};g.getAngleByMousePosition=
function(d,e,a,b){d=g.sub({x:a-d.left,y:b-d.top},e);d=g.getDegrees(Math.atan2(d.y,d.x));0>d&&(d+=360);return d};g.toPositiveAngle=function(d){for(360!==d&&(d=Math.round(d)%360);0>d;)d+=360;return d};g.ifAngleInRange=function(d,e,a){d=g.getRadians(d);e=g.getRadians(e);a=g.getRadians(a);return e>a?d>=e||d<=a:d>=e&&d<=a}})(jQuery);(function(f){f.fn.circleSlider.effects.getRandomColor=function(){for(var f="0123456789ABCDEF".split(""),d="#",e=0;6>e;e++)d+=f[Math.floor(16*Math.random())];return d}})(jQuery);(function(f){f.fn.circleSlider.shapes.backgroundShape=function(f,d){this.settings=f;this.canvas=d;this.context=this.canvas.getContext("2d");this.selfRotateAngle=0;this.randomColor=""};f.fn.circleSlider.shapes.backgroundShape.prototype.draw=function(g,d){var e,a,b,h;e={x:this.settings.radius+this.settings.padding,y:this.settings.radius+this.settings.padding};a=this.settings.radius-this.settings.strokeWidth/2;b=f.fn.circleSlider.vectors.getRadians(this.settings.start);h=f.fn.circleSlider.vectors.getRadians(this.settings.end);
this.context.save();this.settings.isEllipse&&(this.context.scale(1,this.settings.radius2Scale),e.y=this.settings.radius+this.settings.padding*(1+this.settings.radius2Scale));-1!==$.inArray("rotate-bg",this.settings.effects)&&(this.context.translate(e.x,e.y),this.context.rotate(f.fn.circleSlider.vectors.getRadians(this.selfRotateAngle)),e={x:0,y:0},g>=d?this.selfRotateAngle++:this.selfRotateAngle--);this.settings.isBgShadow&&(this.context.shadowColor=this.settings.bgshadowColor,this.context.shadowBlur=
this.settings.bgshadowBlur,this.context.shadowOffsetX=this.settings.bgshadowOffsetX,this.context.shadowOffsetY=this.settings.bgshadowOffsetY);this.context.beginPath();this.context.arc(e.x,e.y,a,b,h,!1);if(-1!==$.inArray("random-bg-color",this.settings.effects))0===Math.round(d)%10?this.randomColor=f.fn.circleSlider.effects.getRandomColor():this.randomColor||(this.randomColor=this.settings.shapeColor),this.context.fillStyle=this.randomColor;else{b=e.x;h=e.y;if(this.settings.isShapeGradient){switch(this.settings.shapeGradientType){case "v":b=
this.context.createLinearGradient(this.canvas.width/2,0,this.canvas.width/2,this.canvas.height);break;case "d1":b=this.context.createLinearGradient(0,0,this.canvas.width,this.canvas.height);break;case "d2":b=this.context.createLinearGradient(0,this.canvas.height,this.canvas.width,0);break;case "r":b=this.context.createRadialGradient(b,h,0,b,h,a);break;default:b=this.context.createLinearGradient(0,this.canvas.height/2,this.canvas.width,this.canvas.height/2)}b.addColorStop(0,this.settings.shapeColor);
b.addColorStop(1,this.settings.shapeColor2);this.context.fillStyle=b}else this.context.fillStyle=this.settings.shapeColor;this.settings.shapeBGImage&&this.settings.shapeBGImage.loaded&&(this.context.fillStyle=this.context.createPattern(this.settings.shapeBGImage,"repeat"))}this.context.fill();this.settings.shapeImage&&this.settings.shapeImage.loaded&&this.context.drawImage(this.settings.shapeImage,this.settings.strokeWidth+this.settings.padding,this.settings.strokeWidth+this.settings.padding,2*(this.settings.radius-
this.settings.strokeWidth),2*(this.settings.radius2-this.settings.strokeWidth));if(this.settings.pathImage)this.settings.pathImage.loaded&&this.context.drawImage(this.settings.pathImage,this.settings.padding,this.settings.padding,2*this.settings.radius,2*this.settings.radius2);else if(0<this.settings.strokeWidth){b=e.x;e=e.y;if(this.settings.isPathGradient){switch(this.settings.strokeGradientType){case "v":a=this.context.createLinearGradient(this.canvas.width/2,0,this.canvas.width/2,this.canvas.height);
break;case "d1":a=this.context.createLinearGradient(0,0,this.canvas.width,this.canvas.height);break;case "d2":a=this.context.createLinearGradient(0,this.canvas.height,this.canvas.width,0);break;case "r":a=this.context.createRadialGradient(b,e,0,b,e,a);break;default:a=this.context.createLinearGradient(0,this.canvas.height/2,this.canvas.width,this.canvas.height/2)}a.addColorStop(0,this.settings.strokeColor);a.addColorStop(1,this.settings.strokeColor2);this.context.strokeStyle=a}else this.context.strokeStyle=
this.settings.strokeColor;this.settings.strokeImage&&this.settings.strokeImage.loaded&&(this.context.strokeStyle=this.context.createPattern(this.settings.strokeImage,"repeat"));this.context.lineWidth=this.settings.strokeWidth;this.context.stroke()}this.context.closePath();this.context.restore()}})(jQuery);(function(f){f.fn.circleSlider.shapes.pathShape=function(f,d){this.settings=f;this.canvas=d;this.context=this.canvas.getContext("2d")};f.fn.circleSlider.shapes.pathShape.prototype.draw=function(g,d){var e,a,b;e=this.settings.radius+this.settings.padding;a=this.settings.radius+this.settings.padding;b=this.settings.radius-this.settings.strokeWidth/2;this.context.save();this.settings.isEllipse&&(this.context.scale(1,this.settings.radius2Scale),a=this.settings.radius+this.settings.padding*(1+this.settings.radius2Scale));
this.context.beginPath();this.context.arc(e,a,b,f.fn.circleSlider.vectors.getRadians(g),f.fn.circleSlider.vectors.getRadians(d),!1);if(0<this.settings.strokeWidth){if(this.settings.isStrokeColorActiveGradient){switch(this.settings.strokeColorActiveGradientType){case "v":e=this.context.createLinearGradient(e,a-b,e,a+b);break;case "d1":e=this.context.createLinearGradient(e-b,a-b,e+2*b,a+2*b);break;case "d2":e=this.context.createLinearGradient(e-b,a+2*b,e+2*b,a-b);break;case "r":e=this.context.createRadialGradient(e,
a,0,e,a,b);break;default:e=this.context.createLinearGradient(e-b,a,e+b,a)}e.addColorStop(0,this.settings.strokeColorActive);e.addColorStop(1,this.settings.strokeColorActive2);this.context.strokeStyle=e;this.context.lineWidth=this.settings.strokeWidth-1}else this.context.strokeStyle=this.settings.strokeColorActive,this.context.lineWidth=this.settings.strokeWidth;this.settings.strokeImageActive&&this.settings.strokeImageActive.loaded&&(this.context.strokeStyle=this.context.createPattern(this.settings.strokeImageActive,
"repeat"));this.context.stroke()}this.context.closePath();this.context.restore()}})(jQuery);(function(f){var g=function(d,e){return{x:d.shapeCenter.x+(d.settings.radius-d.settings.strokeWidth/2)*Math.cos(f.fn.circleSlider.vectors.getRadians(e)),y:d.shapeCenter.y+(d.settings.radius2-d.settings.strokeWidth/2*d.settings.radius2Scale)*Math.sin(f.fn.circleSlider.vectors.getRadians(e))}};f.fn.circleSlider.shapes.handleShape=function(d,e,a){this.settings=d;this.canvas=e;this.context=this.canvas.getContext("2d");this.canvasPos=a;this.selfRotateAngle=0;this.randomColor="";this.shapeCenter={x:this.settings.radius+
this.settings.padding,y:this.settings.radius2+this.settings.padding}};f.fn.circleSlider.shapes.handleShape.prototype.getCenter=function(d){return g(this,d)};f.fn.circleSlider.shapes.handleShape.prototype.draw=function(d,e,a){var b,h,l;b=this.settings.handleRadius;h=2*Math.PI;l=g(this,d);e||(e=1);this.context.save();-1!==$.inArray("rotate-handle",this.settings.effects)&&(this.context.translate(l.x,l.y),this.context.rotate(f.fn.circleSlider.vectors.getRadians(this.selfRotateAngle)),l={x:0,y:0},a>=d?
this.selfRotateAngle++:this.selfRotateAngle--);this.settings.isHandleShadow&&(this.context.shadowColor=this.settings.handleShadowColor,this.context.shadowBlur=this.settings.handleShadowBlur,this.context.shadowOffsetX=this.settings.handleShadowOffsetX,this.context.shadowOffsetY=this.settings.handleShadowOffsetY);this.context.beginPath();this.context.arc(l.x,l.y,b,0,h,!1);if(-1!==$.inArray("random-handle-color",this.settings.effects))0===Math.round(d)%10?this.randomColor=f.fn.circleSlider.effects.getRandomColor():
this.randomColor||(this.randomColor=this.settings.shapeColor),this.context.fillStyle=this.randomColor;else{a=l;d=e;if(this.settings.isHandleGradient){h=1===d?this.settings.handleGradientType:this.settings.handleGradientType2;switch(h){case "v":b=this.context.createLinearGradient(a.x,a.y-b,a.x,a.y+b);break;case "d1":b=this.context.createLinearGradient(a.x-b,a.y-b,a.x+2*b,a.y+2*b);break;case "d2":b=this.context.createLinearGradient(a.x-b,a.y+2*b,a.x+2*b,a.y-b);break;case "r":b=this.context.createRadialGradient(a.x,
a.y,0,a.x,a.y,b);break;default:b=this.context.createLinearGradient(a.x-b,a.y,a.x+b,a.y)}1===d?(b.addColorStop(0,this.settings.handleColor),b.addColorStop(1,this.settings.handleColor2)):(b.addColorStop(0,this.settings.handle2Color),b.addColorStop(1,this.settings.handle2Color2));this.context.fillStyle=b}else this.context.fillStyle=1===d?this.settings.handleColor:this.settings.handle2Color;1===e?this.settings.handleImage&&this.settings.handleImage.loaded&&(this.context.fillStyle=this.context.createPattern(this.settings.handleImage,
"repeat")):this.settings.handle2Image&&this.settings.handle2Image.loaded&&(this.context.fillStyle=this.context.createPattern(this.settings.handle2Image,"repeat"))}this.context.fill();this.context.closePath();this.context.restore()};f.fn.circleSlider.shapes.handleShape.prototype.isMouseInside=function(d,e,a){var b;b=this.shapeCenter.x+(this.settings.radius-this.settings.strokeWidth/2)*Math.cos(f.fn.circleSlider.vectors.getRadians(a));a=this.shapeCenter.y+(this.settings.radius2-this.settings.strokeWidth/
2)*Math.sin(f.fn.circleSlider.vectors.getRadians(a));return f.fn.circleSlider.vectors.isPointInsideCircle(d-this.canvasPos.left,e-this.canvasPos.top,b,a,this.settings.handleRadius)}})(jQuery);(function(f){f.fn.circleSlider.shapes.arrowShape=function(f,d){this.settings=f;this.canvas=d;this.context=this.canvas.getContext("2d")};f.fn.circleSlider.shapes.arrowShape.prototype.draw=function(g,d){var e,a,b;e=this.settings.radius+this.settings.padding;a=this.settings.radius2+this.settings.padding;b=this.settings.radius-this.settings.strokeWidth/2;this.context.save();this.settings.arrowImage?this.settings.arrowImage.loaded&&(this.context.translate(e,a),this.context.rotate(f.fn.circleSlider.vectors.getRadians(g)),
this.context.drawImage(this.settings.arrowImage,0,-this.settings.arrowWidth/2,b-this.settings.handleRadius,this.settings.arrowWidth)):(this.context.beginPath(),this.context.moveTo(e,a),this.context.lineTo(d.x,d.y),this.context.lineWidth=this.settings.arrowWidth,this.context.strokeStyle=this.settings.arrowColor,this.settings.arrowBGImage&&this.settings.arrowBGImage.loaded&&(this.context.strokeStyle=this.context.createPattern(this.settings.arrowBGImage,"repeat")),this.context.stroke(),this.context.closePath());
this.context.restore()}})(jQuery);
